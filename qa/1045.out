QA output created by 1045

=== check unsupported pmie config  version
pmieconf: error - unknown version number in /tmp/[SEQ-PID].pmie: "0" (expected 1)
status=0

=== check that unneeded changes for unsupported versions are dumped
status=0
status=0
// pmieconf-pmie 1 ./pconf
// 1 filesys.buffer_cache threshold = 81.5%
// 1 filesys.buffer_cache hosts = "moomba wobbly"
// 1 filesys.buffer_cache sss_action = no
// 1 filesys.buffer_cache user_command = "pmpost $rule$^ %v@%h"
// 1 filesys.buffer_cache holdoff = 20
// 1 filesys.capacity delta = 60
// 1 network.interface_bytes holdoff = 30
// 1 network.tcp_dropped_conns holdoff = 30
// 1 network.tcp_retransmit holdoff = 30
// end
//
// --- START GENERATED SECTION (do not change this section) ---
//     generated by pmieconf on:  [DATE]
//

// 1 cpu.load_average
delta = 120;
cpu.load_average = 
some_host (
    kernel.all.load  #'1 minute'
        > hinv.ncpu  * 1.5
) -> shell 15 "/usr/pcp/bin/pmpost high 1-minute load average" " %v@%h";

// 1 cpu.system_mode
delta = 120;
cpu.system_mode = 
some_host (
    ( kernel.all.cpu.user 
	+ kernel.all.cpu.sys 
	    > hinv.ncpu  * 75 / 100 ) &&
    ( kernel.all.cpu.sys  /
	( kernel.all.cpu.user 
	    + kernel.all.cpu.sys  )
	> 80 / 100 )
) -> shell 15 "/usr/pcp/bin/pmpost busy executing in system mode" " %h";

// 1 filesys.capacity
delta = 60;
filesys.capacity = 
some_host (
    some_inst (
	( 100 * filesys.used  >
	    95 * filesys.capacity  ) &&
	rate filesys.used  > 0
    )
) -> shell 15 "/usr/pcp/bin/pmpost imminent file system full" " %i@%h";

// 1 memory.exhausted
delta = 120;
memory.exhausted = 
some_host (30 %_sample swap.pagesout  @0..9 > 0) -> shell 15 "/usr/pcp/bin/pmpost chronic main memory exhaustion" " %h";

// --- END GENERATED SECTION (changes below will be preserved) ---

=== check that changes for unsupported versions are moved to end
status=0
status=0
// pmieconf-pmie 1 ./pconf
// 1 filesys.buffer_cache threshold = 81.5%
// 1 filesys.buffer_cache hosts = "moomba wobbly"
// 1 filesys.buffer_cache sss_action = yes
// 1 filesys.buffer_cache user_command = "pmpost $rule$^ %v@%h"
// 1 filesys.buffer_cache holdoff = 20
// 1 filesys.capacity delta = 60
// 1 network.interface_bytes holdoff = 40
// 1 network.tcp_dropped_conns holdoff = 30
// 1 network.tcp_retransmit holdoff = 30
// end
//
// --- START GENERATED SECTION (do not change this section) ---
//     generated by pmieconf on:  [DATE]
//

// 1 cpu.load_average
delta = 120;
cpu.load_average = 
some_host (
    kernel.all.load  #'1 minute'
        > hinv.ncpu  * 1.5
) -> shell 15 "/usr/pcp/bin/pmpost high 1-minute load average" " %v@%h";

// 1 cpu.system_mode
delta = 120;
cpu.system_mode = 
some_host (
    ( kernel.all.cpu.user 
	+ kernel.all.cpu.sys 
	    > hinv.ncpu  * 75 / 100 ) &&
    ( kernel.all.cpu.sys  /
	( kernel.all.cpu.user 
	    + kernel.all.cpu.sys  )
	> 80 / 100 )
) -> shell 15 "/usr/pcp/bin/pmpost busy executing in system mode" " %h";

// 1 filesys.capacity
delta = 60;
filesys.capacity = 
some_host (
    some_inst (
	( 100 * filesys.used  >
	    95 * filesys.capacity  ) &&
	rate filesys.used  > 0
    )
) -> shell 15 "/usr/pcp/bin/pmpost imminent file system full" " %i@%h";

// 1 memory.exhausted
delta = 120;
memory.exhausted = 
some_host (30 %_sample swap.pagesout  @0..9 > 0) -> shell 15 "/usr/pcp/bin/pmpost chronic main memory exhaustion" " %h";

// --- END GENERATED SECTION (changes below will be preserved) ---
// // 2 filesys.buffer_cache (deprecated, rule version no longer supported)
// sample.drift;
// 
// sample.double.one;

=== check that changes for unsupported rules are moved to end
status=0
status=0
// pmieconf-pmie 1 ./pconf
// 1 filesys.buffer_cache threshold = 81.5%
// 1 filesys.buffer_cache hosts = "moomba wobbly"
// 1 filesys.buffer_cache sss_action = yes
// 1 filesys.buffer_cache user_command = "pmpost $rule$^ %v@%h"
// 1 filesys.buffer_cache holdoff = 120
// 1 filesys.capacity delta = 60
// 1 network.interface_bytes holdoff = 30
// 1 network.tcp_dropped_conns holdoff = 30
// 1 network.tcp_retransmit holdoff = 30
// end
//
// --- START GENERATED SECTION (do not change this section) ---
//     generated by pmieconf on:  [DATE]
//

// 1 cpu.system_mode
delta = 120;
cpu.system_mode = 
some_host (
    ( kernel.all.cpu.user 
	+ kernel.all.cpu.sys 
	    > hinv.ncpu  * 75 / 100 ) &&
    ( kernel.all.cpu.sys  /
	( kernel.all.cpu.user 
	    + kernel.all.cpu.sys  )
	> 80 / 100 )
) -> shell 15 "/usr/pcp/bin/pmpost busy executing in system mode" " %h";

// 1 filesys.capacity
delta = 60;
filesys.capacity = 
some_host (
    some_inst (
	( 100 * filesys.used  >
	    95 * filesys.capacity  ) &&
	rate filesys.used  > 0
    )
) -> shell 15 "/usr/pcp/bin/pmpost imminent file system full" " %i@%h";

// 1 memory.exhausted
delta = 120;
memory.exhausted = 
some_host (30 %_sample swap.pagesout  @0..9 > 0) -> shell 15 "/usr/pcp/bin/pmpost chronic main memory exhaustion" " %h";

// --- END GENERATED SECTION (changes below will be preserved) ---
// // 1 cpu.load_average (deprecated, rule definition no longer exists)
// sample.float.ten;
// 
// // 2 filesys.buffer_cache (deprecated, rule version no longer supported)
// sample.drift;
// 
// sample.double.one;
